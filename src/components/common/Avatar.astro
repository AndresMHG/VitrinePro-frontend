---
interface Props {
  src: string;
  alt: string;
  size?: 'sm' | 'md' | 'lg';
  status?: 'pro' | 'verified' | 'online';
  class?: string;
}

const {
  src,
  alt,
  size = 'md',
  status,
  class: className = ''
} = Astro.props;

const sizeMap = {
  sm: '80px',
  md: '120px',
  lg: '160px'
};

const sizeClass = `avatar--${size}`;
---

<div class={`avatar-wrap ${className}`.trim()}>
  <img
    src={src}
    alt={alt}
    class={`avatar ${sizeClass}`}
    loading="lazy"
  />
  {status && (
    <span class={`avatar-status avatar-status--${status}`} aria-label={status}>
      {status === 'pro' && 'PRO'}
      {status === 'verified' && 'âœ“'}
      {status === 'online' && ''}
    </span>
  )}
</div>

<style define:vars={{ size: sizeMap[size] }}>
  .avatar-wrap {
    position: relative;
    width: var(--size);
    height: var(--size);
  }

  .avatar {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    border: 4px solid white;
    box-shadow: var(--shadow-xl);
    object-fit: cover;
  }

  .avatar-status {
    position: absolute;
    right: -6px;
    bottom: 6px;
    background: var(--gradient);
    color: white;
    font-size: 0.7rem;
    font-weight: 700;
    padding: 0.25rem 0.5rem;
    border-radius: var(--radius-full);
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
  }

  .avatar-status--verified {
    background: #10b981;
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.75rem;
  }

  .avatar-status--online {
    background: #10b981;
    width: 12px;
    height: 12px;
    border: 2px solid white;
  }
</style>
