---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
---

<Layout>
  <Header />
  <main class="profile-main">
    <section class="cover">
      <div class="cover-img" role="img" aria-label="Cover image"></div>
    </section>

    <section class="profile-wrap container">
      <aside class="sidebar">
        <div class="card identity">
          <div class="avatar-wrap">
            <img class="avatar" src="https://picsum.photos/id/1005/160/160" alt="User avatar" />
            <span class="badge pro">PRO</span>
          </div>
          <h1 class="name">Janyne Azevedo</h1>
          <ul class="meta">
            <li>Disponible para freelance</li>
            <li>Children's illustrator</li>
            <li>Freelancer</li>
            <li>Natal, Brazil</li>
            <li><a href="#" class="link">janyneazevedo.com</a></li>
          </ul>
          <div class="actions">
            <button class="btn primary">Seguir</button>
            <button class="btn secondary">Mensaje</button>
          </div>
        </div>
      </aside>

      <section class="content">
        <div class="tabs">
          <button class="tab active" data-tab="work">Todos</button>
          <button class="tab" data-tab="boards">Projetos </button>
          <button class="tab" data-tab="reviews">Articulos </button>
          <button class="tab" data-tab="">Eventos </button>
        </div>
        <div class="grid">
          <article class="card project" data-category="proyectos">
            <div class="thumb">
              <img src="https://picsum.photos/id/1015/800/600" alt="Swans" />
              <div class="pill">Para ti</div>
            </div>
            <div class="p-meta">
              <h3 class="p-title">Swans</h3>
              <p class="p-author">Janyne Azevedo</p>
              <div class="p-stats">
                <span class="s"><span class="i">‚ù§Ô∏è</span> 6</span>
                <span class="s"><span class="i">üëÅÔ∏è</span> 23</span>
              </div>
            </div>
          </article>
          {
            (() => {
                const projects = [
                { src: 'https://picsum.photos/id/1011/800/600', alt: 'Mountains', title: 'Cumbres', author: 'Janyne Azevedo', likes: 34, views: 210, category: 'proyectos' },
                { src: 'https://picsum.photos/id/1013/800/600', alt: 'Forest path', title: 'Sendero', author: 'Janyne Azevedo', likes: 9, views: 48, category: 'ilustraciones' },
                { src: 'https://picsum.photos/id/1014/800/600', alt: 'Sea waves', title: 'Olas', author: 'Janyne Azevedo', likes: 27, views: 134, category: 'proyectos' },
                { src: 'https://picsum.photos/id/1016/800/600', alt: 'Desert', title: 'Dunas', author: 'Janyne Azevedo', likes: 6, views: 33, category: 'imagenes' },
                { src: 'https://picsum.photos/id/1020/800/600', alt: 'Bridge', title: 'Puente antiguo', author: 'Janyne Azevedo', likes: 44, views: 302, category: 'proyectos' },
                { src: 'https://picsum.photos/id/1024/800/600', alt: 'Horse', title: 'Caballo', author: 'Janyne Azevedo', likes: 12, views: 76, category: 'ilustraciones' },
                { src: 'https://picsum.photos/id/1027/800/600', alt: 'Flowers', title: 'Ramillete', author: 'Janyne Azevedo', likes: 29, views: 150, category: 'imagenes' },
                { src: 'https://picsum.photos/id/1031/800/600', alt: 'Night sky', title: 'Cielo nocturno', author: 'Janyne Azevedo', likes: 53, views: 410, category: 'proyectos' },
                { src: 'https://picsum.photos/id/1043/800/600', alt: 'Lake', title: 'Lago sereno', author: 'Janyne Azevedo', likes: 21, views: 98, category: 'fotografia' },
                { src: 'https://picsum.photos/id/1047/800/600', alt: 'Old book', title: 'Libros viejos', author: 'Janyne Azevedo', likes: 8, views: 41, category: 'ilustraciones' },
                { src: 'https://picsum.photos/id/1050/800/600', alt: 'Farm field', title: 'Campo', author: 'Janyne Azevedo', likes: 22, views: 78, category: 'imagenes' }
                ];

              return projects.map((item) => (
                <article class="card project" data-category={item.category}>
                  <div class="thumb">
                    <img src={item.src} alt={item.alt} />
                  </div>
                  <div class="p-meta">
                    <h3 class="p-title">{item.title}</h3>
                    <p class="p-author">{item.author}</p>
                    <div class="p-stats">
                      <span class="s"><span class="i">‚ù§Ô∏è</span> {item.likes}</span>
                      <span class="s"><span class="i">üëÅÔ∏è</span> {item.views}</span>
                    </div>
                  </div>
                </article>
              ));
            })()
          }

        </div>
      </section>
    </section>
  </main>
  <Footer />
</Layout>

<style>
:root{
  --vp-primary: #0A66C2;
  --vp-secondary: #004182;
  --vp-gradient: linear-gradient(135deg, var(--vp-primary), var(--vp-secondary));
  --vp-bg: #ffffff;
  --vp-muted: #f5f7fa;
  --vp-border: #e5e7eb;
  --vp-text: #111827;
  --vp-subtext:#6b7280;
}
.container{margin:0 auto;padding:0 20px;}
.profile-main{background:#fff;min-height:100vh;position:relative;}
.profile-main::before{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background:radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.3) 0%, transparent 50%);pointer-events:none;z-index:0;}
/* Cover */
.cover{background:#eef2f7;}
.cover-img{height:180px;background-image:url('https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?q=80&w=1600&auto=format&fit=crop');background-size:cover;background-position:center;border-bottom:1px solid var(--vp-border);}
/* Layout */
.profile-wrap{display:grid;grid-template-columns:280px 1fr;gap:2rem;}
.sidebar{position:relative;top:-25px;height:fit-content;}
.card{background:#fff;border:1px solid var(--vp-border);border-radius:16px;box-shadow:0 8px 24px rgba(0,0,0,.06);}
.identity{padding:1rem;}
.avatar-wrap{position:relative;width:120px;height:120px;margin:-60px 0 .5rem 0;}
.avatar{width:120px;height:120px;border-radius:50%;border:4px solid #fff;box-shadow:0 8px 22px rgba(0,0,0,.12);object-fit:cover;}
.badge.pro{position:absolute;right:-6px;bottom:6px;background:var(--vp-gradient);color:#fff;font-size:.7rem;font-weight:700;padding:.25rem .5rem;border-radius:9999px;box-shadow:0 4px 10px rgba(0,0,0,.15);}
.name{font-size:1.5rem;color:var(--vp-text);margin:.25rem 0 .75rem 0;}
.meta{list-style:none;padding:0;margin:0 .25rem .75rem 0;display:grid;gap:.35rem;color:#475569;font-size:.95rem;}
.link{color:var(--vp-primary);text-decoration:none}
.link:hover{text-decoration:underline}
.actions{display:grid;gap:.5rem;margin:.75rem 0 1rem 0;}
.btn{display:inline-flex;align-items:center;justify-content:center;border-radius:9999px;padding:.6rem 1rem;font-weight:700;border:1px solid transparent;cursor:pointer;transition:.2s}
.btn.primary{background:var(--vp-gradient);color:#fff}
.btn.primary:hover{filter:brightness(1.05);transform:translateY(-1px)}
.btn.secondary{background:#fff;color:var(--vp-primary);border-color:#bcd5f1}
.btn.secondary:hover{background:#f0f7ff}
.btn.ghost{background:#f8fafc;color:#111827;border-color:#e5e7eb;text-align:center;text-decoration:none}
.stats{display:grid;grid-template-columns:repeat(3,1fr);gap:.5rem}
.stat{background:#f8fafc;border:1px solid #eef2f7;border-radius:12px;padding:.6rem;text-align:center}
.num{display:block;font-weight:800;color:#111827;line-height:1}
.label{font-size:.75rem;color:#64748b}
/* content */
.content{min-width:0;margin-top:12px; margin-bottom: 60px;}
.tabs{display:flex;gap:1.25rem;border-bottom:1px solid var(--vp-border);margin-bottom:1rem}
.tab{background:transparent;border:none;padding:.75rem .25rem;font-weight:700;color:#6b7280;cursor:pointer;position:relative}
.tab.active{color:#111827}
.tab.active::after{content:'';position:absolute;left:0;right:0;bottom:-1px;height:3px;background:var(--vp-gradient);border-radius:3px 3px 0 0}
/* grid */
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1.25rem;margin-top:1rem}
.project{overflow:hidden;border-radius:16px}
.project .thumb{height:220px;position:relative;overflow:hidden}
.project img{width:100%;height:100%;object-fit:cover;transition:transform .4s cubic-bezier(.4,0,.2,1)}
.project:hover img{transform:scale(1.06)}
.project .pill{position:absolute;left:12px;bottom:12px;background:rgba(0,0,0,.6);color:#fff;font-weight:700;font-size:.8rem;padding:.35rem .6rem;border-radius:8px}
.project .pill.promo{background:var(--vp-gradient)}
.p-meta{padding:1rem;border-top:1px solid var(--vp-border)}
.p-title{margin:0 0 .25rem 0;font-size:1.05rem;font-weight:800;color:#111827}
.p-author{margin:0 0 .5rem 0;color:#64748b;font-size:.9rem}
.p-stats{display:flex;gap:1rem;color:#374151;font-size:.85rem;font-weight:600}
.p-stats .i{margin-right:.25rem}
/* responsive */
@media (max-width: 1024px){.profile-wrap{grid-template-columns:1fr}}
@media (max-width: 768px){
  .cover-img{height:140px}
  .project .thumb{height:180px}
}
@media (max-width: 480px){
  .profile-wrap{gap:1rem}
  .avatar-wrap{margin-top:-40px}
  .avatar{width:96px;height:96px}
  .grid{grid-template-columns:1fr}
}
</style>

<script>
// Tabs and filters behavior with strict typing
document.addEventListener('DOMContentLoaded', () => {
  const tabs = Array.from(document.querySelectorAll('.tabs .tab')) as HTMLButtonElement[];
  tabs.forEach((t) =>
    t.addEventListener('click', () => {
      tabs.forEach((x) => x.classList.remove('active'));
      t.classList.add('active');
    })
  );

  const searchInput = document.getElementById('searchInput') as HTMLInputElement | null;
  const clearBtn = document.getElementById('clearSearch') as HTMLButtonElement | null;
  const cards = Array.from(document.querySelectorAll('.card.project')) as HTMLElement[];
  const filters = Array.from(document.querySelectorAll('.filter')) as HTMLButtonElement[];
  const empty = document.getElementById('emptyState') as HTMLElement | null;

  function applyFilter() {
    const active = document.querySelector('.filter.active') as HTMLButtonElement | null;
    const activeFilter = active?.getAttribute('data-filter') || 'todos';
    const q = (searchInput?.value || '').toLowerCase().trim();

    cards.forEach((card) => {
      const title = (card.querySelector('.p-title')?.textContent || '').toLowerCase();
      const category = card.getAttribute('data-category') || '';
      const matchesText = q === '' || title.includes(q);
      const matchesCat =
        activeFilter === 'todos' ||
        category === activeFilter ||
        (activeFilter === 'imagenes' && category === 'imagenes');

      card.style.display = matchesText && matchesCat ? 'block' : 'none';
    });

    const anyVisible = cards.some((c) => c.style.display !== 'none');
    if (empty) empty.hidden = anyVisible;
  }

  if (searchInput && clearBtn) {
    const si = searchInput;
    const cb = clearBtn;

    si.addEventListener('input', () => {
      cb.style.display = si.value ? 'inline-flex' : 'none';
      applyFilter();
    });

    cb.addEventListener('click', () => {
      si.value = '';
      cb.style.display = 'none';
      si.focus();
      applyFilter();
    });
  }

  filters.forEach((btn) => {
    btn.addEventListener('click', () => {
      filters.forEach((b) => b.classList.remove('active'));
      btn.classList.add('active');

      if (searchInput && clearBtn) {
        searchInput.value = '';
        clearBtn.style.display = 'none';
      }
      applyFilter();
    });
  });

  applyFilter();
});
</script>