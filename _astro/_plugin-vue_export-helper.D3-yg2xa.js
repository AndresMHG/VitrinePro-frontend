const o="http://localhost:3000";async function u(t){try{const e=await fetch(`${o}/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){let r="Error al registrar usuario";try{r=(await e.json()).message||r}catch{r=`Error ${e.status}: ${e.statusText}. Verifica que el servidor esté corriendo en ${o}`}throw new Error(r)}return await e.json()}catch(e){throw console.error("Error en register:",e),e}}async function l(t){try{const e=await fetch(`${o}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){let r="Error al iniciar sesión";try{r=(await e.json()).message||r}catch{r=`Error ${e.status}: ${e.statusText}. Verifica que el servidor esté corriendo en ${o}`}throw new Error(r)}return await e.json()}catch(e){throw console.error("Error en login:",e),e}}async function f(t){try{const e=await fetch(`${o}/auth/profile`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}});if(!e.ok){let r="Error al obtener perfil";try{r=(await e.json()).message||r}catch{e.status===404?r=`Error 404: El endpoint /auth/profile no existe en ${o}`:r=`Error ${e.status}: ${e.statusText}`}throw new Error(r)}return await e.json()}catch(e){throw console.error("Error en getProfile:",e),e}}const s="auth_token",a="auth_user";function d(t){typeof window<"u"&&localStorage.setItem(s,t)}function c(){return typeof window<"u"?localStorage.getItem(s):null}function h(){typeof window<"u"&&localStorage.removeItem(s)}function g(t){typeof window<"u"&&localStorage.setItem(a,JSON.stringify(t))}function w(){if(typeof window<"u"){const t=localStorage.getItem(a);return t?JSON.parse(t):null}return null}function p(){typeof window<"u"&&localStorage.removeItem(a)}function y(){return c()!==null}const E=(t,e)=>{const r=t.__vccOpts||t;for(const[n,i]of e)r[n]=i;return r};export{E as _,g as a,w as b,f as c,h as d,p as e,c as g,y as i,l,u as r,d as s};
