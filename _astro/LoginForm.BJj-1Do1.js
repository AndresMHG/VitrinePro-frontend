import{v as _,a as g,w}from"./runtime-dom.esm-bundler.XdelSIez.js";import{_ as h,l as y,s as k,a as x}from"./_plugin-vue_export-helper.D3-yg2xa.js";/* empty css                       */import{d as L,c as a,a as o,b as m,w as u,t as f,e as E,r as n,o as i}from"./runtime-core.esm-bundler.CbHwxXao.js";const M=L({__name:"LoginForm",setup(v,{expose:s}){s();const l=n({email:"",password:"",remember:!1}),e=n(!1),d=n(""),c=n(""),r=n({});async function b(){if(d.value="",c.value="",r.value={},l.value.email||(r.value.email="El email es requerido"),l.value.password||(r.value.password="La contraseña es requerida"),!(Object.keys(r.value).length>0)){e.value=!0;try{const t=await y({email:l.value.email,password:l.value.password});k(t.access_token),x(t.user),c.value="¡Iniciaste sesión correctamente!",setTimeout(()=>{window.location.href="/VitrinePro-frontend/profile-view"},1e3)}catch(t){d.value=t.message||"Error al iniciar sesión. Intenta de nuevo.",console.error("Login error:",t)}finally{e.value=!1}}}const p={form:l,isLoading:e,errorMessage:d,successMessage:c,fieldErrors:r,handleLogin:b};return Object.defineProperty(p,"__isScriptSetup",{enumerable:!1,value:!0}),p}}),V={class:"login-form-wrapper"},C={class:"form-group"},T=["disabled"],q={key:0,class:"error-text"},I={class:"form-group"},N=["disabled"],S={key:0,class:"error-text"},U={class:"form-options"},B={class:"checkbox-label"},O=["disabled"],j={key:0,class:"alert alert-error"},D={key:1,class:"alert alert-success"},F=["disabled"],P={key:0},R={key:1};function z(v,s,l,e,d,c){return i(),a("div",V,[o("form",{onSubmit:w(e.handleLogin,["prevent"]),class:"login-form"},[o("div",C,[s[3]||(s[3]=o("label",{for:"email",class:"form-label"},"E-mail",-1)),u(o("input",{id:"email","onUpdate:modelValue":s[0]||(s[0]=r=>e.form.email=r),type:"email",class:"form-input",placeholder:"tu@email.com",required:"",disabled:e.isLoading},null,8,T),[[_,e.form.email]]),e.fieldErrors.email?(i(),a("span",q,f(e.fieldErrors.email),1)):m("",!0)]),o("div",I,[s[4]||(s[4]=o("label",{for:"password",class:"form-label"},"Contraseña",-1)),u(o("input",{id:"password","onUpdate:modelValue":s[1]||(s[1]=r=>e.form.password=r),type:"password",class:"form-input",placeholder:"Tu contraseña",required:"",disabled:e.isLoading},null,8,N),[[_,e.form.password]]),e.fieldErrors.password?(i(),a("span",S,f(e.fieldErrors.password),1)):m("",!0)]),o("div",U,[o("label",B,[u(o("input",{"onUpdate:modelValue":s[2]||(s[2]=r=>e.form.remember=r),type:"checkbox",class:"checkbox-input",disabled:e.isLoading},null,8,O),[[g,e.form.remember]]),s[5]||(s[5]=o("span",null,"Recuérdame",-1))]),s[6]||(s[6]=o("a",{href:"/recuperar-senha",class:"forgot-link"},"¿Olvidaste tu contraseña?",-1))]),e.errorMessage?(i(),a("div",j,f(e.errorMessage),1)):m("",!0),e.successMessage?(i(),a("div",D,f(e.successMessage),1)):m("",!0),o("button",{type:"submit",class:"btn btn-primary btn-full",disabled:e.isLoading},[e.isLoading?(i(),a("span",R,"Iniciando sesión...")):(i(),a("span",P,"Entrar"))],8,F)],32),s[7]||(s[7]=o("div",{class:"auth-footer"},[E(" ¿No tienes cuenta? "),o("a",{href:"/cadastro"},"Crea una ahora")],-1))])}const K=h(M,[["render",z],["__scopeId","data-v-8ff72eee"]]);export{K as default};
